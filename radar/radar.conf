input{

	file{
		path => "/home/marcos/dado.txt"
		start_position => "beginning"
	}

}

filter{

	csv{
		separator => ";"
		columns => ["date_time","R2S-UMB ID1 precipitation diff. mm Act","R2S-UMB ID1 precipitation absol. mm Act","R2S-UMB ID1 precipitation type  Act","R2S-UMB ID1 sum of drizzle-drops events Act","R2S-UMB ID1 sum of rain-drops events Act","R2S-UMB ID1 sum of hail events Act","R2S-UMB ID1 drizzle flag  Act","R2S-UMB ID1 rain flag  Act","R2S-UMB ID1 snow flag  Act","R2S-UMB ID1 ambient temperature Â°C Act","R2S-UMB ID1 precipitat.intensity in/h Act","R2S-UMB ID1 sum of hail  Act","R2S-UMB ID1 sum of rain-drops  Act"]
	}

	if[message]=~"^WARNING: TIME INFORMATION IS LOCALTIME" or [message]=~"^;R2S-UMB ID1 precipitation diff"{
		drop{}
	}

	mutate {		
		convert => { "R2S-UMB ID1 precipitation diff. mm Act" => "integer" }
		convert => { "R2S-UMB ID1 precipitation absol. mm Act" => "float" }
		convert => { "R2S-UMB ID1 precipitation type  Act" => "integer" }
		convert => { "R2S-UMB ID1 sum of drizzle-drops events Act" => "integer" }	
		convert => { "R2S-UMB ID1 sum of rain-drops events Act" => "integer" }
		convert => { "R2S-UMB ID1 sum of hail events Act" => "integer" }
		convert => { "R2S-UMB ID1 drizzle flag  Act" => "integer" }
		convert => { "R2S-UMB ID1 rain flag  Act" => "integer" }	
		convert => { "R2S-UMB ID1 snow flag  Act" => "integer" }
		convert => { "R2S-UMB ID1 ambient temperature Â°C Act" => "float" }
		convert => { "R2S-UMB ID1 precipitat.intensity in/h Act" => "integer" }
		convert => { "R2S-UMB ID1 sum of hail  Act" => "integer" }	
		convert => { "R2S-UMB ID1 sum of rain-drops  Act" => "integer" }
	}

	date {
		match => [ "date_time" , "yyyy-MM-dd HH:mm:ss" ]
		target => "date_time"
		timezone => "America/Sao_Paulo"
		locale => "pt-br"
	}
	
}

output{

	stdout{
		codec=>rubydebug
	}

	#elasticsearch {
	#   hosts => "http://localhost:9200"
	#   index => "logstash-bit"
	#}

	file {
	   path => "/home/marcos/json.json"
	}

	file {
	   path => "/home/marcos/txt.txt"
	   codec => line { format => "%{message}"}
	}

}
